<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reminder</title>
    <link rel="stylesheet" href="style.css">
    <style>.container {
        max-width: 600px;
        margin: 0 auto;
        padding: 20px;
    }
    
    h1 {
        text-align: center;
    }
    
    .calendar {
        /* Стили календаря */
    }
    
    .reminder-form input, 
    .reminder-form button {
        margin-top: 10px;
    }
    
    .reminder-table {
        width: 100%;
        margin-top: 20px;
        border-collapse: collapse;
    }
    
    .reminder-table th, 
    .reminder-table td {
        padding: 10px;
        text-align: center;
        border: 1px solid #ccc;
    }
    
    .reminder-table th {
        background-color: #f2f2f2;
    }
    
    .reminder-table td.actions {
        width: 100px;
    }
    </style>
</head>
<body>
    <div class="container">
        <h1>Reminder</h1>
        <div class="calendar">
            <!-- Календарь -->
        </div>
        <form id="reminder-form" class="reminder-form">
            <input type="text" id="event-input" placeholder="Event">
            <input type="date" id="date-input">
            <input type="time" id="time-input">
            <button type="submit">Add Reminder</button>
        </form>
        <table class="reminder-table">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Time</th>
                    <th>Event</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody id="reminder-list">
                <!-- Список напоминаний -->
            </tbody>
        </table>
    </div>
    
    <script>
        // Класс "Reminder"
class Reminder {
    constructor(event, date, time) {
      this.event = event;
      this.date = date;
      this.time = time;
    }
    startReminderTimer() {
        const targetDateTime = new Date(`${this.date} ${this.time}`);
        const currentTime = new Date();
    
        const timeRemaining = targetDateTime.getTime() - currentTime.getTime();
    
        if (timeRemaining > 0) {
          setTimeout(() => {
            Sound.playReminderSound();
            calendar.removeReminder(this); // Удаление напоминания после воспроизведения звукового сигнала
            displayReminders(); // Обновление отображения списка напоминаний
          }, timeRemaining);
        }
      }
    
    
    static isValidDate(date, time) {
      const selectedDateTime = new Date(`${date} ${time}`);
      const currentDateTime = new Date();
      return selectedDateTime > currentDateTime;
    }
  
    getEvent() {
      return this.event;
    }
    getDate() {
      return this.date;
    }
    getTime() {
      return this.time;
    }
  }
  
  // Класс "Calendar"
  class Calendar {
    constructor() {
      this.reminders = [];
      this.currentMonth = new Date().getMonth();
      this.currentYear = new Date().getFullYear();
    }
  
    addReminder(reminder) {
      if (!this.hasDuplicateReminder(reminder)) {
        this.reminders.push(reminder);
      }
    }
  
    removeReminder(reminder) {
      this.reminders = this.reminders.filter(
        (r) => r.event !== reminder.event && r.date !== reminder.date
      );
    }
  
    hasDuplicateReminder(reminder) {
      return this.reminders.some(
        (r) => r.event === reminder.event && r.date === reminder.date
      );
    }
  }
  
  // Класс "Sound"
  class Sound {
    static playReminderSound() {
      const audio = new Audio('sound.mp3');
      alert('fff');
      audio.play();
    }
  }
  
  const calendar = new Calendar();
  
  document.getElementById('reminder-form').addEventListener('submit', (e) => {
    e.preventDefault();
  
    const eventInput = document.getElementById('event-input');
    const dateInput = document.getElementById('date-input');
    const timeInput = document.getElementById('time-input');
  
    const event = eventInput.value.trim();
    const date = dateInput.value.trim();
    const time = timeInput.value.trim();
  
    if (!event || !date || !time) {
      alert('Please fill in all fields');
      return;
    }
  
    if (!Reminder.isValidDate(date, time)) {
      alert('Please select a future date and time');
      return;
    }
  
    const reminder = new Reminder(event, date, time);
    calendar.addReminder(reminder);
    displayReminders();
    
    eventInput.value = '';
    dateInput.value = '';
    timeInput.value = '';
  });
  
  function displayReminders() {
    const reminderList = document.getElementById('reminder-list');
    reminderList.innerHTML = '';
  
    calendar.reminders.forEach((reminder) => {
        reminder.startReminderTimer();
      const row = document.createElement('tr');
      const dateCell = document.createElement('td');
      const timeCell = document.createElement('td');
      const eventCell = document.createElement('td');
      const actionsCell = document.createElement('td');
      const deleteButton = document.createElement('button');
  
      dateCell.textContent = reminder.getDate();
      timeCell.textContent = reminder.getTime();
      eventCell.textContent = reminder.getEvent();
      deleteButton.textContent = 'Delete';
  
      deleteButton.addEventListener('click', () => {
        calendar.removeReminder(reminder);
        displayReminders();
      });
  
      row.appendChild(dateCell);
      row.appendChild(timeCell);
      row.appendChild(eventCell);
      actionsCell.appendChild(deleteButton);
      row.appendChild(actionsCell);
      reminderList.appendChild(row);
    });
  }
  
  displayReminders();
  
    </script>
</body>
</html>